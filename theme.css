/* ===========================
   Dowson Farms — theme.css
   =========================== */
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap');

:root {
  /* Brand palette */
  --brand-green: #1B5E20;
  --brand-gold:  #f1d565;
  --brand-gold-dark: #B8860B; /* legacy */
  --paper: #f6f3e4;
  --ink:   #222;

  /* Calm, readable tones */
  --gold-text: #1b1b1b;

  /* Softer gold used elsewhere */
  --accent-gold: #E7CA4A;

  /* Subtle tan band (auth/footer/breadcrumbs) */
  --auth-edge-bg: #E6DCB8;

  /* Optional tile theming hooks (light defaults) */
  --tile-bg: #fff;
  --tile-border: var(--brand-green);

  /* Layout sizing */
  --header-h: 64px;
  --crumb-h:  40px;
  --footer-h: 40px;     /* tightened app footer */
  --pad-x:    16px;

  /* Z-index */
  --z-header:  1000;
  --z-crumbs:   900;
  --z-footer:  1000;
}

/* ===========================
   Base
   =========================== */
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: var(--paper);
  color: var(--ink);

  /* Ensure content isn’t hidden behind sticky bars */
  padding-top: calc(var(--header-h) + var(--crumb-h));
  padding-bottom: var(--footer-h);
}

/* ===========================
   Sticky Header
   =========================== */
.app-header {
  position: fixed; top: 0; left: 0; right: 0;
  height: var(--header-h);
  background: var(--brand-green);
  color: #fff;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 var(--pad-x);
  padding-top: env(safe-area-inset-top, 8px); /* iPhone notch */
  padding-bottom: 6px;
  box-sizing: border-box;
  box-shadow: 0 2px 6px rgba(0,0,0,.18);
  z-index: var(--z-header);
}
.app-header__left,
.app-header__right { display: flex; align-items: center; gap: 10px; }

/* Header title matches login font globally */
.app-header__title {
  font-family: 'Playfair Display', serif;
  font-weight: 600;
  font-size: 1.25rem;
  letter-spacing: .2px;
}

.app-logo { width: 32px; height: 32px; border-radius: 8px; }
.clock {
  font-variant-numeric: tabular-nums;
  font-weight: 600;
  min-width: 9.5ch;      /* prevents width jitter */
  text-align: right;
}

/* ===========================
   Breadcrumbs (fixed under header)
   - Calm tan bar (same as footer), text follows --ink
   =========================== */
.breadcrumbs {
  position: fixed; top: var(--header-h); left: 0; right: 0;
  height: var(--crumb-h);
  display: flex; align-items: center; justify-content: space-between;
  background: var(--auth-edge-bg);
  color: var(--ink);
  padding: 0 var(--pad-x);
  border-bottom: 1px solid rgba(0,0,0,.12);
  box-shadow: 0 1px 0 rgba(0,0,0,.08);
  z-index: var(--z-crumbs);
}
.breadcrumbs ol {
  display: flex; align-items: center; gap: 8px;
  list-style: none; margin: 0; padding: 0;
  font-size: .95rem; font-weight: 700;
}
.breadcrumbs a { color: var(--ink); text-decoration: none; }
.breadcrumbs a:hover { text-decoration: underline; }
.breadcrumbs .sep { color: var(--ink); opacity: .95; }

/* ===========================
   Global Logout button (breadcrumbs)
   - Small, elegant, white Playfair text
   =========================== */
.breadcrumbs .logout-btn {
  background: var(--brand-green);
  color: #fff;
  font-family: 'Playfair Display', serif;
  font-weight: 600;
  font-size: .88rem;
  letter-spacing: .2px;
  line-height: 1.15;
  padding: 4px 12px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,.12);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.breadcrumbs .logout-btn:hover,
.breadcrumbs .logout-btn:focus-visible {
  background: #154a18;
  outline: none;
}

/* Touch comfort on mobile */
@media (hover: none) {
  .breadcrumbs a { padding: 6px 2px; }
}

/* ===========================
   Content Wrapper
   =========================== */
.content {
  padding: 16px;
  min-height: calc(100vh - var(--header-h) - var(--crumb-h) - var(--footer-h));
}

/* ===========================
   Sticky Footer (app pages)
   =========================== */
.app-footer {
  position: fixed; left: 0; right: 0; bottom: 0;
  height: var(--footer-h);
  background: var(--auth-edge-bg);
  color: #666;
  display: flex; align-items: center; justify-content: center;
  gap: 8px; padding: 0 var(--pad-x);
  font-weight: 600; font-size: .80rem;
  z-index: var(--z-footer);
}
.app-footer .dot { opacity: .6; color: #666; }

/* ===========================
   Tiles (Home) — smaller, neat rectangles
   =========================== */
.df-tiles {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); /* compact width */
  gap: 10px;
  padding: 14px;
}
.df-tile {
  aspect-ratio: 7 / 4;                 /* shorter height */
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  background: var(--tile-bg);
  border: 2px solid var(--tile-border);
  border-radius: 12px;
  text-decoration: none; text-align: center;
  color: var(--ink);                    /* follow theme text color */
  font-weight: 600;
  padding: 8px;
  box-sizing: border-box;
  overflow: hidden;
}
.df-tile:hover { background: var(--brand-gold); color: #000; }
.df-tile span {
  display: block; margin-top: 6px;
  font-size: .86rem; line-height: 1.2; word-break: break-word;
  color: var(--ink);                    /* follow theme text color */
}

/* ===========================
   Headings
   =========================== */
.content h1 {
  font-family: 'Montserrat', sans-serif;
  font-size: 1.4rem; font-weight: 500; letter-spacing: .3px;
  margin: 0 0 1rem; color: var(--ink);  /* follow theme text color */
}
/* Home page title — same look, themed color */
body.home-page .content h1 {
  font-family: 'Playfair Display', serif;
  font-size: 1.35rem;
  font-weight: 600;
  letter-spacing: .2px;
  color: var(--ink);                    /* follow theme text color */
}

/* ===========================
   AUTH (Login / Forgot) — polished
   =========================== */

/* shorter footer only on login */
.auth-page { --footer-h: 36px; }

/* Consistent look during rubber-band scroll on iOS */
.auth-page{
  background: linear-gradient(180deg, #f6f3e4 0%, #efe9cf 100%);
  background-color: #efe9cf;      /* solid fallback */
  background-attachment: fixed;   /* pins gradient for Safari */
  padding-top: calc(env(safe-area-inset-top, 0px) + 6px);
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + var(--footer-h));
}
/* Fill the notch/pull-down zone with a darker, matching band */
.auth-page::before{
  content:"";
  position: fixed; top: 0; left: 0; right: 0;
  height: env(safe-area-inset-top, 0px);
  background: var(--auth-edge-bg);
  pointer-events: none; z-index: 0;
}
/* Fill the bottom safe area to match footer color as well */
.auth-page::after{
  content:"";
  position: fixed; left: 0; right: 0; bottom: 0;
  height: env(safe-area-inset-bottom, 0px);
  background: var(--auth-edge-bg);
  pointer-events: none; z-index: 0;
}

.auth-wrap {
  min-height: calc(100vh - var(--footer-h));
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 8px;
}

/* --- Hero (logo, title, subtitle) --- */
.auth-hero { 
  text-align: center;
  padding: 2px 12px 0;
  transform: translateY(-40px);  /* lift hero higher above card */
  margin-bottom: -20px;          /* keep card from moving */
}
.auth-hero__logo{
  width: 70px; height: 70px;
  margin: 0 auto 6px;
  border-radius: 50%;
  background: #fff;
  border: 2px solid var(--brand-green);
  display: grid; place-items: center;
  box-shadow: 0 3px 8px rgba(0,0,0,.08);
}
.auth-hero__logo img{
  width: 52px; height: 52px;
  border-radius: 8px;
  object-fit: contain;
}
.auth-hero__title{
  font-family: 'Playfair Display', serif;
  font-size: 1.28rem;
  font-weight: 600;
  letter-spacing: .2px;
  margin: 0 0 4px;
  color: var(--brand-green);
}
.auth-hero__subtitle{
  font-size: .95rem;
  color: #5b5b5b;
  margin: 0 0 6px;
}

/* --- Card --- */
.auth-card {
  width: min(330px, 88vw);
  margin: 0 auto;
  padding: 20px 16px 28px;   /* a touch taller so button can sit lower */
  background: #fff;
  border: 2px solid var(--brand-green);
  border-radius: 14px;
  box-shadow: 0 8px 22px rgba(0,0,0,.10);
}

/* Inputs (16px prevents iOS zoom) */
.field label{ display: block; font-weight: 700; color: var(--brand-green); margin: 0 0 6px; }
.auth-card input[type="text"],
.auth-card input[type="email"],
.auth-card input[type="password"]{
  width: 100%; padding: 11px 12px;
  border: 1px solid var(--brand-green); border-radius: 8px;
  font-size: 16px; /* important: no iOS zoom on focus */
  box-sizing: border-box; background: #fff;
}
.field input:focus{ border-color: var(--jd-yellow-dark); box-shadow: 0 0 0 3px rgba(200,168,0,.18); }
.field-hint{ margin: 6px 2px 0; font-size: .9rem; color: #b00020; }

/* Password eye (SVG icon) */
.password-wrap{ position: relative; }
.password-wrap .eye{
  position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
  display: inline-grid; place-items: center;
  width: 28px; height: 28px; border: 0; background: transparent; cursor: pointer;
  color: var(--brand-green);
}
.password-wrap .eye svg{ width: 20px; height: 20px; display: block; }

/* Remember + Forgot row */
.form-row{ display: flex; align-items: center; justify-content: space-between; gap: 12px; margin: 2px 0 6px; }
.checkbox{ display: inline-flex; align-items: center; gap: 8px; cursor: pointer; }
.checkbox input{ width: 18px; height: 18px; }

/* Less prominent Forgot link */
.muted-link{
  color:#3a3a3a; text-decoration:none; font-weight:600; font-size: .88rem;
}
.muted-link:hover{ text-decoration: underline; }

/* Primary button — smaller, lowered, white Playfair text */
.auth-page .btn-primary {
  width: 100%;
  padding: 9px 12px;
  border: 0;
  border-radius: 12px;
  background: var(--brand-green);
  color: #fff;
  font-family: 'Playfair Display', serif;
  font-weight: 600;
  font-size: .95rem;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,.12);
  margin-top: 16px;
}
.auth-page .btn-primary:hover { background:#154a18; }

/* Auth footer — matches subtle tan, lighter grey text */
.app-footer--auth{
  position: fixed; left: 0; right: 0; bottom: 0;
  height: var(--footer-h);
  background: var(--auth-edge-bg);
  color: #666;
  display: flex; align-items: center; justify-content: center;
  font-size: .85rem; padding: 0 10px;
  border-top: 1px solid rgba(0,0,0,.06);
  z-index: 1000;
}
.app-footer--auth .dot{ opacity:.6; }

/* Forgot-password modal */
.auth-modal__backdrop{
  position: fixed; inset: 0; display: none;
  align-items: center; justify-content: center;
  background: rgba(0,0,0,.38);
  z-index: 2000;
}
.auth-modal{
  width: min(420px, 92vw);
  background: #fff;
  border: 2px solid var(--brand-green);
  border-radius: 14px;
  box-shadow: 0 18px 40px rgba(0,0,0,.25);
  padding: 16px;
}
.auth-modal h2{ margin: 0 0 8px; font-size: 1.1rem; color: var(--brand-green); }
.auth-modal .modal-actions{ display: flex; justify-content: flex-end; gap: 8px; margin-top: 12px; }
.btn-link{
  background: transparent; border: none; color: var(--brand-green);
  font-weight: 700; cursor: pointer; padding: 6px 10px;
}
.btn-secondary{
  background: #e9f2eb; border: 1px solid var(--brand-green);
  border-radius: 10px; padding: 8px 12px; cursor: pointer; font-weight: 700;
}
.btn-secondary:hover{ background:#dcebdc; }

/* Inputs in modal also 16px to avoid zoom */
.auth-modal input[type="text"],
.auth-modal input[type="email"],
.auth-modal input[type="password"]{
  font-size: 16px;
}

/* ===========================
   Back button (bottom-left) for form pages
   - Shown by core.js on sub-pages with forms; designed to sit above footer
   =========================== */
.back-fab{
  position: fixed;
  left: 10px;
  bottom: calc(env(safe-area-inset-bottom, 0px) + var(--footer-h) + 8px);
  display: inline-flex; align-items: center; gap: 6px;
  padding: 6px 10px;
  background: #fff;
  color: var(--brand-green);
  border: 2px solid var(--brand-green);
  border-radius: 12px;
  font: 600 .9rem 'Playfair Display', serif;
  box-shadow: 0 6px 16px rgba(0,0,0,.12);
  cursor: pointer;
  z-index: calc(var(--z-footer) + 10);
}
.back-fab .chev{ font-size: 1.1rem; line-height: 1; transform: translateY(-1px); }
.back-fab:hover,
.back-fab:focus-visible{ background:#fefefe; outline: none; }

/* Small phones */
@media (max-width: 360px){
  .auth-hero__title{ font-size: 1.2rem; }
  .auth-card{ width: 90vw; }
}

/* ===========================
   Dark / Auto Theme overrides
   =========================== */
@media (prefers-color-scheme: dark) {
  :root[data-theme="auto"] {
    --paper: #141612;
    --ink:   #e8e6df;
    --brand-green: #184a1b;
    --auth-edge-bg: #2a2d24;
    --accent-gold: #d9c767;
    --gold-text: #e9e5cc;
    --jd-yellow-dark: #bfa100;

    --tile-bg: #1c1f18;
    --tile-border: #2d6a31;
  }
}

:root[data-theme="dark"] {
  --paper: #141612;
  --ink:   #e8e6df;
  --brand-green: #184a1b;
  --auth-edge-bg: #2a2d24;
  --accent-gold: #d9c767;
  --gold-text: #e9e5cc;
  --jd-yellow-dark: #bfa100;

  --tile-bg: #1c1f18;
  --tile-border: #2d6a31;
}

:root[data-theme="light"] {
  /* no overrides — uses your defaults */
}