<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dowson Farms ‚Äî Firestore Seeder</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
    import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

    // --- Your Firebase config (same as firebase-init.js) ---
    const firebaseConfig = {
      apiKey: "AIzaSyA2QgzfthK3EhIyQsuX3hb4WU-i-tbFVv8",
      authDomain: "dowsonfarms-528ab.firebaseapp.com",
      projectId: "dowsonfarms-528ab",
      storageBucket: "dowsonfarms-528ab.firebasestorage.app",
      messagingSenderId: "921602446527",
      appId: "1:921602446527:web:11bc4bf326bc3dee4be20a",
      measurementId: "G-E82B957E0K"
    };

    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    async function seedAdmin() {
      try {
        // 1. Role: Administrator
        await setDoc(doc(db, "roles", "Administrator"), {
          label: "Administrator",
          description: "Full access to everything",
          permissions: { "*": { "*": { view: true, edit: true, delete: true } } },
          createdAt: serverTimestamp(),
          updatedAt: serverTimestamp()
        }, { merge: true });

        // 2. User: danekillam@gmail.com
        await setDoc(doc(db, "users", "danekillam@gmail.com"), {
          id: "danekillam@gmail.com",
          email: "danekillam@gmail.com",
          displayName: "Dane Killam",
          type: "employee",
          roleId: "Administrator",
          archived: false,
          exceptions: { enabled: false, grants: {} },
          createdAt: serverTimestamp(),
          updatedAt: serverTimestamp()
        }, { merge: true });

        alert("‚úÖ Seed complete! Your admin role and user are set up.");
      } catch (err) {
        console.error(err);
        alert("‚ùå Error: " + err.message);
      }
    }

    window.seedAdmin = seedAdmin;
  </script>
</head>
<body style="font-family: sans-serif; padding: 2rem;">
  <h1>Dowson Farms Firestore Seeder</h1>
  <p>Click the button below to seed Firestore with an <strong>Administrator role</strong> and link it to <code>danekillam@gmail.com</code>.</p>
  <button onclick="seedAdmin()" style="padding:1rem 2rem;font-size:1.1rem;">üöÄ Seed Admin Role + User</button>
</body>
</html>
