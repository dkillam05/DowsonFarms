<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0f5a1a" />
  <title>Dowson Farms — Home</title>

  <!-- GitHub Pages base -->
  <base href="/DowsonFarms/">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- Apple Touch Icons (FarmVista set) -->
  <link rel="apple-touch-icon" sizes="120x120" href="assets/icons/farmvista-apple-touch-icon-120.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/farmvista-apple-touch-icon-152.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="assets/icons/farmvista-apple-touch-icon-167.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/farmvista-apple-touch-icon-180.png" />

  <!-- Prepaint theme (unchanged) -->
  <script>
    (function () {
      var pref = localStorage.getItem('df_theme') || 'auto';
      var dark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      var mode = pref === 'auto' ? (dark ? 'dark' : 'light') : pref;
      document.documentElement.setAttribute('data-theme', mode);
      document.documentElement.style.colorScheme = mode === 'dark' ? 'dark' : 'light';
    })();
  </script>

  <!-- Global CSS only -->
  <link rel="stylesheet" href="assets/css/drawer.css" />
  <link rel="stylesheet" href="assets/css/header.css" />
</head>
<body>
  <!-- Main content only. Header/Drawer/Footer are injected by their JS files. -->
  <main style="padding:18px;max-width:1100px;margin:0 auto;">
    <h1>Welcome</h1>
    <p>This Home screen will grow (Chat-style box, weather, quick cards). Use the ☰ menu for navigation.</p>
  </main>

  <!-- Data sources -->
  <script src="assets/data/menus.js"></script>
  <script src="assets/data/drawer-menus.js"></script>
  <script src="assets/data/footer-links.js"></script>

  <!-- Single-source version (used in drawer footer) -->
  <script defer src="js/version.js"></script>

  <!-- Firebase + guard (guard also injects the global wait overlay) -->
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/auth-guard.js"></script>

  <!-- Global injectors: header, drawer, footer -->
  <script defer src="js/header.js"></script>
  <script type="module" src="js/drawer.js"></script>
  <script defer src="js/footer.js"></script>

  <!-- PWA: register your existing ServiceWorker.js -->
  <script>
    if ('serviceWorker' in navigator) {
      addEventListener('load', function () {
        navigator.serviceWorker.register('/DowsonFarms/ServiceWorker.js', { scope: '/DowsonFarms/' })
          .catch(console.warn);
      });
    }
  </script>
</body>
</html>